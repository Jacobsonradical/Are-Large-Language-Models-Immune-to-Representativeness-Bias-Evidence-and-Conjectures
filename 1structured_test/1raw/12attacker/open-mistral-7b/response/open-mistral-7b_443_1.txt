To estimate the probability that the attacker is male, we can use Bayes' theorem. Bayes' theorem allows us to update our beliefs about the probability of an event (in this case, the attacker being male) given new evidence.

The formula for Bayes' theorem is:

P(A|B) = [P(B|A) * P(A)] / P(B)

Where:
- P(A|B) is the probability of A given B, which is what we want to find.
- P(B|A) is the likelihood of observing B given that A is true. In this case, it's the probability that a witness identifies a male as male, which we know is 0.8 from the first piece of information.
- P(A) is the prior probability of A, which is the probability of the attacker being male before any evidence was gathered.
- P(B) is the probability of observing B, which is the probability of a witness identifying any person as male, given that the person's gender is unknown.

We can't directly calculate P(B) based on the information given, but we can derive it from P(A) and the error rate of the witness. Since the witness errs 20% of the time, they correctly identify gender 80% of the time. So, P(B|A) = 0.8 and P(B|~A) = 0.2, where ~A represents the opposite of A, i.e., the attacker being female.

Now, let's assume P(A) = p, the probability that the attacker is male. Then P(~A) = 1-p, the probability that the attacker is female.

Since the witness errs equally often for both genders, we have:

P(B|A) = p * (1-err_male) + (1-p) * err_female
P(B|~A) = (1-p) * (1-err_female) + p * err_male

Where err_male and err_female are the error rates for identifying males and females, respectively. We know that P(B|A) = 0.8, so we can solve this equation for err_male:

0.8 = p * (1-0.2) + (1-p) * 0.2
0.8 = 0.8p + 0.2(1-p)
0.8 = 0.8p + 0.2 - 0.2p
0.6 = 0.6p
p = 1

However, this solution seems implausible given the second piece of information that 85% of the population is female. So let's try an alternative approach.

Since the witness errs equally often for both genders, we can assume that the error rates for identifying males and females are equal. Let's call this error rate e. Then:

P(B|A) = p(1-e) + (1-p)e
P(B|~A) = (1-p)(1-e) + pe

We know that P(B|A) = 0.8, so we can solve this equation for p:

0.8 = p(1-e) + (1-p)e
0.8 = 1-pe + pe - e
0.8 = 1 - 2e
e = 0.4

Now, since there are twice as many females as males in the city, we can assume that the prior probability of the attacker being male is half that of being female. So, P(A) = 0.15 and P(~A) = 0.85.

Using these values, we can calculate P(B):

P(B) = P(B|A) * P(A) + P(B|~A) * P(~A)
P(B) = 0.8 * 0.15 + 0.8 * 0.85
P(B) = 0.12 + 0.68
P(B) = 0.8

Now we can use Bayes' theorem to find P(A|B):

P(A|B) = [P(B|A) * P(A)] / P(B)
P(A|B) = (0.8 * 0.15) / 0.8
P(A|B) = 0.12 / 0.8
P(A|B) = 0.15

So, our estimate of the probability that the attacker is male given the evidence is 0.15, or 15%. This is lower than the actual proportion of males in the city, which is 15%, but it takes into account the fact that the witness is not perfect at identifying genders and that there are twice as many females as males in the city.