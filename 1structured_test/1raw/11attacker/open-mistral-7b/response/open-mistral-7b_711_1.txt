Given the information provided, the witness's ability to correctly identify race is 80% and the error rate is 20%. The population of the city is 85% white and 15% black.

To estimate the probability that the attacker is black, we can use Bayes' theorem, which is a formula for updating the probability for a hypothesis based on evidence. In this case, the hypothesis is that the attacker is black, and the evidence is the witness's identification.

Bayes' theorem states that the posterior probability (P(H|E)) is equal to the likelihood of the evidence given the hypothesis (P(E|H)) times the prior probability of the hypothesis (P(H)) divided by the probability of the evidence (P(E)):

P(H|E) = P(E|H) * P(H) / P(E)

In our case, P(H) is the prior probability that the attacker is black, P(E|H) is the likelihood that the witness identifies a black person as black, and P(E) is the probability that the witness makes the observed identification.

The likelihood P(E|H) is 80% (since the witness correctly identifies a black person as black 80% of the time). The prior probability P(H) is the proportion of black people in the population, which is 15%.

The probability of the evidence P(E) is the sum of the probability of the evidence given that the attacker is black (P(E|H)) and the probability of the evidence given that the attacker is white (P(E|~H)), where ~H denotes the negation of H (i.e., the attacker is white). Since the witness identifies a white person as black 20% of the time, P(E|~H) is 0.20.

The probability of the evidence P(E) is therefore:

P(E) = P(E|H) * P(H) + P(E|~H) * P(~H)
   = 0.80 * 0.15 + 0.20 * 0.85
   = 0.12 + 0.17
   = 0.29

Now we can calculate the posterior probability P(H|E):

P(H|E) = P(E|H) * P(H) / P(E)
       = 0.80 * 0.15 / 0.29
       = 0.2857

So, the probability that the attacker is black is approximately 28.57%.