The probability that the attacker is black, given the information provided, can be estimated using Bayes' theorem. Bayes' theorem provides a way to update our belief about the probability of an event (the attacker being black) based on new evidence (the witness's testimony).

The formula for Bayes' theorem is:

P(A|B) = [P(B|A) * P(A)] / [P(B)]

Where:
- P(A|B) is the probability of event A given event B
- P(B|A) is the probability of event B given event A (this is the witness's reliability in identifying race)
- P(A) is the prior probability of event A (the proportion of black people in the city)
- P(B) is the probability of event B (the witness's testimony of a black attacker)

We are given P(A) as 15% and P(B|A) as 1 (since the witness always correctly identifies a black person as black). We need to find P(B) and P(B|A).

To find P(B), we can use the witness's reliability in identifying race:

P(B) = P(B|A) * P(A) + P(B|not A) * P(not A)

Since we don't have the value of P(B|not A) (the probability of the witness identifying a white person as black), let's assume that the witness is equally bad at misidentifying races (erring 20% of the time for both white and black people). This means P(B|not A) = 0.2.

Using the given values, we can calculate P(B):

P(B) = (1 * 0.15) + (0.2 * 0.85) = 0.15 + 0.17 = 0.32

Now we can calculate P(A|B):

P(A|B) = [P(B|A) * P(A)] / P(B)

= [1 * 0.15] / 0.32

= 0.46875

So, the estimated probability that the attacker is black, given the witness's testimony and the racial composition of the city, is approximately 0.47 or 47%. Keep in mind that this is an estimate based on certain assumptions, and in a real-world scenario, more detailed or specific information would be needed to make a more precise calculation.